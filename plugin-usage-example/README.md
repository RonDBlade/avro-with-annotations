# Plugin Usage Example README

This module demonstrates how to use the `avro-annotation-plugin`.

## Configuration for JAR Packaging

To ensure that the final JAR file contains the annotated Avro classes (and not the original, un-annotated ones), you must follow two key steps in your `build.gradle`:

### 1. Overwrite Generated Sources

Configure the `avroAnnotation` task to use the same directory for both its input and output. This makes the annotation task overwrite the original files generated by the standard Avro plugin.

```groovy
avroAnnotation {
    // Read from the directory where the Avro plugin generates its sources
    inputDir = file("build/generated-main-avro-java")
    
    // Write the annotated sources back to the SAME directory
    outputDir = file("build/generated-main-avro-java") 
    
    schemaFile = file("src/main/avro/Person.avsc")
}
```

By doing this, you avoid duplicate class errors and ensure that the standard `compileJava` task, which is already configured to look at this directory, picks up the final annotated versions.

### 2. Add Annotation Dependencies

The project that *uses* the plugin must have a dependency on the annotations library that the plugin applies. In this example, we are adding `@NotNull`, which is in the `org.jetbrains:annotations` library.

Add the following to your `dependencies` block:

```groovy
dependencies {
    // ... other dependencies
    implementation 'org.jetbrains:annotations:24.1.0'
}
```

This makes the annotations available to the Java compiler during the `compileJava` task. 